<!DOCTYPE html>
<html>

<head>
    <title>Admin Login</title>
    <!-- You have these -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
</head>

<body>
    <div id="login-form">
        <h2>Admin Login</h2>
        <input type="email" id="email" placeholder="Admin Email">
        <input type="password" id="password" placeholder="Password">
        <button onclick="loginAdmin()">Login</button>
        <div id="message"></div>
    </div>

    <div id="admin-panel" style="display: none;">
        <h2>Welcome, Admin!</h2>
        <p>Admin panel content here...</p>
        <button onclick="logout()">Logout</button>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCpzXbFwpeHOBprUTFnvxp-0NvSjlIeuRg",
            authDomain: "japa-269a4.firebaseapp.com",
            projectId: "japa-269a4",
            storageBucket: "japa-269a4.firebasestorage.app",
            messagingSenderId: "736749113389",
            appId: "1:736749113389:web:886266a10a7b32f5ae28a4"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        async function loginAdmin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const messageDiv = document.getElementById('message');

            try {
                // Sign in user
                const userCredential = await auth.signInWithEmailAndPassword(email, password);

                // Check if user has admin privileges
                const idTokenResult = await userCredential.user.getIdTokenResult();

                if (idTokenResult.claims.admin) {
                    alert("Welcome admin")
                    window.location.href = 'admin.html'
                } else {
                    messageDiv.innerHTML = '❌ Access denied. Not an admin.';
                    auth.signOut();
                }
            } catch (error) {
                messageDiv.innerHTML = `❌ ${error.message}`;
            }
        }

        function logout() {
            auth.signOut();
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('admin-panel').style.display = 'none';
        }

    </script>
</body>

</html>